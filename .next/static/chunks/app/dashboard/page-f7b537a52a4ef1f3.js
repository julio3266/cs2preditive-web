(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8858:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),i=s(2265),r=s(7648),n=s(9376),c=s(9116),d=s(6766);function l(){let[e,t]=(0,i.useState)([]),[s,l]=(0,i.useState)([]),[m,h]=(0,i.useState)(!0),x=(0,n.useSearchParams)();(0,d.a)(e=>{t(t=>{let s=t.findIndex(t=>t.id===e.id),a=[...t];return s>=0?a[s]=e:a.push(e),a.filter(e=>"live"===e.status||"scheduled"===e.status)})}),(0,i.useEffect)(()=>{"1"===x.get("success")&&window.history.replaceState({},"","/dashboard")},[x]),(0,i.useEffect)(()=>{localStorage.getItem("token")&&Promise.all([c.wB.upcoming(),c.Wk.list()]).then(e=>{let[s,a]=e;t(s),l(a)}).catch(()=>{}).finally(()=>h(!1))},[]);let u=e.filter(e=>"live"===e.status),p=e.filter(e=>"scheduled"===e.status),g=new Map(s.map(e=>[e.matchId,e])),f=(0,i.useMemo)(()=>{let e=new Map;return p.forEach(t=>{if(!t.startTime)return;let s=t.startTime.slice(0,10);e.has(s)||e.set(s,[]),e.get(s).push(t)}),Array.from(e.entries()).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)})},[p]);return m?(0,a.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,a.jsx)("p",{className:"text-zinc-400",children:"Carregando partidas..."})}):(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Partidas ao vivo e pr\xf3ximos jogos. Atualiza\xe7\xf5es em tempo real via WebSocket."})]}),u.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),"Ao vivo"]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:u.map(e=>(0,a.jsx)(o,{match:e,prediction:g.get(e.id)},e.id))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Pr\xf3ximos jogos"}),0===p.length&&0===u.length?(0,a.jsx)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-12 text-center text-zinc-400",children:"Nenhuma partida ao vivo ou agendada. Em produ\xe7\xe3o, dados vir\xe3o de integra\xe7\xf5es (HLTV, Steam API, etc.)."}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:p.map(e=>(0,a.jsx)(o,{match:e,prediction:g.get(e.id)},e.id))})]}),f.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Calend\xe1rio — pr\xf3ximas datas"}),(0,a.jsx)("div",{className:"space-y-6",children:f.map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"rounded-xl border border-[var(--border)] bg-[var(--card)] overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-4 py-3 bg-white/5 border-b border-[var(--border)] flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:function(e){let t=new Date(e),s=new Date;s.setHours(0,0,0,0);let a=new Date(s);return(a.setDate(a.getDate()+1),t.setHours(0,0,0,0),t.getTime()===s.getTime())?"Hoje":t.getTime()===a.getTime()?"Amanh\xe3":t.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})}(t)}),(0,a.jsxs)("span",{className:"text-sm text-zinc-500",children:[s.length," jogo(s)"]})]}),(0,a.jsx)("div",{className:"divide-y divide-[var(--border)]",children:s.map(e=>(0,a.jsxs)(r.default,{href:"/dashboard/match/".concat(e.id),className:"flex items-center justify-between px-4 py-3 hover:bg-white/5 transition",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.teamA," vs ",e.teamB]}),(0,a.jsx)("span",{className:"text-sm text-zinc-500",children:e.startTime?new Date(e.startTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"—"})]},e.id))})]},t)})})]})]})}function o(e){let{match:t,prediction:s}=e,i="live"===t.status;return(0,a.jsx)(r.default,{href:"/dashboard/match/".concat(t.id),className:"block",children:(0,a.jsxs)("div",{className:"rounded-xl border border-[var(--border)] bg-[var(--card)] p-6 hover:border-[var(--accent)]/50 transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:t.league||"CS2"}),i&&(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-xs text-red-400",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),"AO VIVO"]}),"scheduled"===t.status&&(0,a.jsx)("span",{className:"text-xs text-zinc-500",children:t.startTime?new Date(t.startTime).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"Agendada"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("p",{className:"font-medium",children:t.teamA}),(0,a.jsx)("p",{className:"text-sm text-zinc-500",children:t.map||"—"})]}),(0,a.jsx)("div",{className:"text-center shrink-0",children:(0,a.jsxs)("p",{className:"text-2xl font-bold text-[var(--accent)]",children:[t.teamAScore," \xd7 ",t.teamBScore]})}),(0,a.jsx)("div",{className:"flex-1 text-right",children:(0,a.jsx)("p",{className:"font-medium",children:t.teamB})})]}),s&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-[var(--border)]",children:[(0,a.jsx)("p",{className:"text-xs text-zinc-500 mb-1",children:"Sugest\xe3o"}),(0,a.jsxs)("p",{className:"text-sm",children:["skip"===s.suggestedPick?"Aguardar":"teamA"===s.suggestedPick?t.teamA:t.teamB," ","— ",Math.round(100*s.confidence),"% confian\xe7a"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:s.reason}),s.odds&&(0,a.jsxs)("p",{className:"text-xs text-zinc-500 mt-1",children:["Odds: ",t.teamA," ",s.odds.teamA,"x — ",t.teamB," ",s.odds.teamB,"x"]}),s.lines&&s.lines.length>0&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:s.lines.slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-white/10 text-zinc-400",children:"handicap"===e.type?"Handicap":"ht"===e.type?"HT":"overtime"===e.type?"OT":"Vencedor"},t))})]}),(0,a.jsx)("p",{className:"text-xs text-[var(--accent)] mt-3 opacity-80",children:"Ver detalhes →"})]})})}},9116:function(e,t,s){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s));let i=await fetch("".concat("https://cs2preditive-api-production.up.railway.app").concat(e),{...t,headers:a});if(!i.ok)throw Error((await i.json().catch(()=>({message:i.statusText}))).message||"Erro na requisi\xe7\xe3o");return i.json()}s.d(t,{I8:function(){return i},Wk:function(){return c},rC:function(){return r},wB:function(){return n}});let i={login:(e,t)=>a("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),register:(e,t)=>a("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})},r={me:()=>a("/users/me")},n={list:()=>a("/matches"),live:()=>a("/matches/live"),upcoming:()=>a("/matches/upcoming"),one:e=>a("/matches/".concat(e))},c={list:()=>a("/predictions"),forMatch:e=>a("/predictions/".concat(e))}},6766:function(e,t,s){"use strict";s.d(t,{a:function(){return r}});var a=s(2265),i=s(8680);function r(e){let t=(0,a.useRef)(e);t.current=e,(0,a.useEffect)(()=>{let e=(0,i.io)("".concat("https://cs2preditive-api-production.up.railway.app","/live"),{path:"/socket.io",transports:["websocket","polling"]});return e.on("match:update",e=>{t.current(e)}),()=>{e.disconnect()}},[])}}},function(e){e.O(0,[972,936,971,966,744],function(){return e(e.s=8858)}),_N_E=e.O()}]);